import{_ as $}from"./AppLayout.vue_vue_type_script_setup_true_lang-C77BmNq7.js";import{d as V}from"./index-CZQkL-u1.js";import{u as P,r as G,x as S,o as H,a as R,s as C,c as n,b as U,d as p,h as T,e as F,f as e,t as o,j,y as M,g as x,i as l,F as E,k as q,z as J}from"./app-CekrNlUD.js";import{u as K}from"./useNotifications-78tmBmDa.js";import"./index-Bz1MuH3i.js";import"./useForwardExpose-QPUmnBKC.js";import"./VisuallyHidden-Dysg4OKv.js";import"./RovingFocusGroup-BbBwqAc5.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./createLucideIcon-DsrYUkfJ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DLtQmBoz.js";const Q=(g,i)=>{const m=g.__vccOpts||g;for(const[f,v]of i)m[f]=v;return m},W={class:"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-200"},X={class:"p-4 sm:p-6"},Y={class:"mb-6 sm:mb-8"},Z={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},ee={class:"flex-1 min-w-0"},te={class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white truncate"},se={class:"text-sm sm:text-base text-gray-600 dark:text-gray-300 mt-1 sm:mt-2 truncate"},re={class:"flex items-center gap-3 sm:gap-4 mt-2 sm:mt-0"},oe={class:j(["inline-flex items-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-semibold whitespace-nowrap","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"])},ae={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-6 sm:mb-8"},ne={class:"relative overflow-hidden rounded-lg sm:rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 sm:p-6 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300"},le={class:"flex items-center"},de={class:"ml-3 sm:ml-4"},ie={class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white"},me={class:"relative overflow-hidden rounded-lg sm:rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 sm:p-6 hover:border-green-400 dark:hover:border-green-500 transition-all duration-300"},ce={class:"flex items-center"},ue={class:"ml-3 sm:ml-4"},xe={class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white"},ge={key:0,class:"hidden sm:block relative overflow-hidden rounded-lg sm:rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 sm:p-6 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300"},be={class:"flex items-center"},he={class:"ml-3 sm:ml-4"},pe={class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white"},fe={key:1,class:"hidden sm:block relative overflow-hidden rounded-lg sm:rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 sm:p-6 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300"},ve={class:"flex items-center"},ye={class:"ml-3 sm:ml-4"},_e={class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white"},ke={class:"relative rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 sm:p-6"},we={class:"mb-6 sm:mb-8"},Ce={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-0"},Me={class:"flex-1 min-w-0"},je={class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white truncate"},De={class:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mt-1 truncate"},ze={class:"mt-2 sm:mt-0 text-xs sm:text-sm px-2 sm:px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 whitespace-nowrap"},Ne={class:"ml-1 sm:ml-2 text-green-600 dark:text-green-400"},Se={class:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},Ue={key:0,class:"absolute top-2 right-2 sm:top-3 sm:right-3 z-10"},Ee={class:"relative"},Oe={class:"relative inline-flex items-center justify-center h-5 w-5 sm:h-6 sm:w-6 rounded-full bg-red-500 text-white text-xs font-bold shadow"},Ae={class:"absolute top-2 left-2 sm:top-3 sm:left-3 z-10"},Be={class:"relative"},Le={key:0,class:"h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full bg-green-500 border-2 border-white dark:border-gray-800"},Ie={key:1,class:"h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full bg-gray-400 border-2 border-white dark:border-gray-800"},$e={class:"flex items-center gap-3 sm:gap-4"},Ve={class:"relative flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-full font-bold text-sm sm:text-base bg-blue-500 text-white flex-shrink-0"},Pe={class:"flex-1 min-w-0"},Ge={class:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2"},He={class:"font-semibold text-gray-900 dark:text-white truncate group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors text-sm sm:text-base"},Re={key:0,class:"text-xs text-green-600 dark:text-green-400 font-medium whitespace-nowrap"},Te={key:1,class:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap"},Fe={class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate mt-0.5"},qe={class:"mt-4 sm:mt-6 space-y-2 sm:space-y-3"},Je={class:"flex items-center justify-between text-xs sm:text-sm"},Ke={class:"font-mono text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 sm:px-2 sm:py-1 rounded text-xs"},Qe={key:0,class:"flex items-center justify-between text-xs sm:text-sm"},We={class:"text-gray-900 dark:text-white text-xs sm:text-sm"},Xe={class:"mt-4 sm:mt-6"},Ye=["onClick"],Ze={key:0,class:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 p-6 sm:p-8 md:p-12 text-center"},et={class:"mt-4 sm:mt-6 text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"},tt={class:"mt-2 sm:mt-3 text-xs sm:text-sm text-gray-600 dark:text-gray-400 max-w-md px-2"},st={__name:"Dashboard",props:{users:{type:Array,required:!0}},setup(g){const i=P(),{getNotificationCount:m,markAsRead:f,setupGlobalListener:v}=K(),a=G({}),u=g,O=[{title:"Dashboard",href:V().url}],d=i.props.auth.user.role==="admin";u.users.forEach(s=>{a.value[s.id]=s.is_online_now});const c=S(()=>d?u.users.filter(s=>s.id!==i.props.auth.user.id):u.users.filter(s=>s.role==="admin"&&s.id!==i.props.auth.user.id)),A=s=>s.split(" ").map(t=>t[0]).join("").toUpperCase(),B=s=>{f(s),J.get(`/chat/${s}`)};let y=null,_=null;const k=()=>{C.post("/user/ping").catch(()=>{console.log("Ping failed")})},L=()=>{c.value.forEach(s=>{if(s.last_seen_at){const t=new Date(s.last_seen_at),b=new Date-t;a.value[s.id]=b<180*1e3}})},I=()=>{if(window.Echo)try{return window.Echo.join("online-users").here(t=>{t.forEach(r=>{r.id!==i.props.auth.user.id&&(a.value[r.id]=!0)})}).joining(t=>{t.id!==i.props.auth.user.id&&(a.value[t.id]=!0)}).leaving(t=>{t.id!==i.props.auth.user.id&&(a.value[t.id]=!1)}).listen(".UserOnlineStatusUpdated",t=>{t.user&&t.user.id!==i.props.auth.user.id&&(a.value[t.user.id]=t.is_online)}),()=>{window.Echo.leave("online-users")}}catch(s){console.error("Echo error:",s)}return()=>{}};H(()=>{k(),y=setInterval(k,3e4),_=setInterval(L,1e4);const s=I(),t=v();document.addEventListener("visibilitychange",D),R(()=>{y&&clearInterval(y),_&&clearInterval(_),s&&s(),t&&t(),C.post("/user/offline").catch(()=>{}),document.removeEventListener("visibilitychange",D)})});const D=()=>{document.hidden?C.post("/user/offline").catch(()=>{}):k()},z=S(()=>Object.values(a.value).filter(s=>s).length),N=s=>{if(!s.last_seen_at)return"Never";const t=new Date(s.last_seen_at),b=new Date-t,h=Math.floor(b/6e4);if(h<1)return"Just now";if(h<60)return`${h}m ago`;const w=Math.floor(h/60);return w<24?`${w}h ago`:`${Math.floor(w/24)}d ago`};return(s,t)=>(l(),n(E,null,[U(p(T),{title:"Dashboard"}),U($,{breadcrumbs:O},{default:F(()=>[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("h1",te,o(d?"Chat Management":"Chat Dashboard"),1),e("p",se,o(d?"Manage and view all system users":"Chat with our support team"),1)]),e("div",re,[t[1]||(t[1]=e("div",{class:"flex items-center"},[e("div",{class:"relative mr-2"},[e("div",{class:"h-2 w-2 rounded-full bg-green-500"}),e("div",{class:"absolute h-2 w-2 rounded-full bg-green-500 animate-ping"})]),e("span",{class:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden xs:inline"}," Online ")],-1)),e("span",oe,[M(o(d?"Admin":"User")+" ",1),t[0]||(t[0]=e("div",{class:"ml-1 sm:ml-2 h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-blue-500 dark:bg-blue-400"},null,-1))])])]),t[2]||(t[2]=e("div",{class:"mt-3 sm:mt-4 h-0.5 sm:h-1 w-16 sm:w-24 bg-blue-500 rounded-full"},null,-1))]),e("div",ae,[e("div",ne,[e("div",le,[t[4]||(t[4]=e("div",{class:"p-2 sm:p-3 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",de,[t[3]||(t[3]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-300 truncate"}," Total Users",-1)),e("p",ie,o(c.value.length),1)])])]),e("div",me,[e("div",ce,[t[6]||(t[6]=e("div",{class:"p-2 sm:p-3 rounded-lg bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ue,[t[5]||(t[5]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-300 truncate"}," Online Now",-1)),e("p",xe,o(z.value),1)])])]),d?(l(),n("div",ge,[e("div",be,[t[8]||(t[8]=e("div",{class:"p-2 sm:p-3 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])],-1)),e("div",he,[t[7]||(t[7]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-300 truncate"}," Admin Users",-1)),e("p",pe,o(u.users.filter(r=>r.role==="admin").length),1)])])])):x("",!0),d?(l(),n("div",fe,[e("div",ve,[t[10]||(t[10]=e("div",{class:"p-2 sm:p-3 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",ye,[t[9]||(t[9]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-300 truncate"}," Regular Users",-1)),e("p",_e,o(u.users.filter(r=>r.role!=="admin").length),1)])])])):x("",!0)]),e("div",ke,[e("div",we,[e("div",Ce,[e("div",Me,[e("h2",je,o(d?"User Directory":"Members"),1),e("p",De,o(d?"Manage your team members and their account permissions here.":"Chat with members today"),1)]),e("div",ze,[M(o(d?`${c.value.length} users`:`${c.value.length} staff`)+" ",1),e("span",Ne," • "+o(z.value)+" online ",1)])])]),e("div",Se,[(l(!0),n(E,null,q(c.value,r=>(l(),n("div",{key:r.id,class:"group relative overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 sm:p-6 transition-all duration-300 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-sm sm:hover:shadow-md"},[p(m)(r.id)>0?(l(),n("div",Ue,[e("div",Ee,[t[11]||(t[11]=e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"},null,-1)),e("span",Oe,o(p(m)(r.id)>9?"9+":p(m)(r.id)),1)])])):x("",!0),e("div",Ae,[e("div",Be,[a.value[r.id]?(l(),n("div",Le,[...t[12]||(t[12]=[e("div",{class:"absolute h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full bg-green-500 animate-ping"},null,-1)])])):(l(),n("div",Ie))])]),e("div",$e,[e("div",Ve,o(A(r.name)),1),e("div",Pe,[e("div",Ge,[e("h3",He,o(r.name),1),a.value[r.id]?(l(),n("span",Re," • Online ")):(l(),n("span",Te," • "+o(N(r)),1))]),e("p",Fe,o(r.email),1),e("span",{class:j(["inline-block mt-1.5 sm:mt-2 px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs font-semibold",(r.role==="admin","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200")])},o(r.role==="admin"?"Admin":"User"),3)])]),e("div",qe,[e("div",Je,[t[13]||(t[13]=e("span",{class:"text-gray-600 dark:text-gray-400"},"ID:",-1)),e("span",Ke," #"+o(r.id),1)]),r.last_seen_at&&!a.value[r.id]?(l(),n("div",Qe,[t[14]||(t[14]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Last Seen:",-1)),e("span",We,o(N(r)),1)])):x("",!0)]),e("div",Xe,[e("button",{onClick:b=>B(r.id),class:j(["w-full rounded-lg px-3 py-2.5 sm:px-4 sm:py-3 text-xs sm:text-sm font-semibold transition-all duration-300 hover:shadow-sm",a.value[r.id]?"bg-blue-500 hover:bg-blue-600 text-white":"bg-blue-400 hover:bg-blue-500 text-white opacity-90"])},o(a.value[r.id]?"Chat Now":"Send Message"),11,Ye)])]))),128))]),c.value.length===0?(l(),n("div",Ze,[t[15]||(t[15]=e("div",{class:"rounded-full bg-blue-50 dark:bg-blue-900/30 p-4 sm:p-6"},[e("svg",{class:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("h3",et,o(d?"No users found":"No support staff available"),1),e("p",tt,o(d?"Get started by inviting your first team member.":"Please check back later or contact system administrator."),1)])):x("",!0)]),t[16]||(t[16]=e("div",{class:"mt-6 sm:mt-8 text-center"},[e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},[e("span",{class:"text-blue-600 dark:text-blue-400 font-medium"},"BOA Chat"),M(" • Secure communication powered by "),e("span",{class:"text-gray-700 dark:text-gray-300 font-medium"},"Realpay Global Services")])],-1))])])]),_:1})],64))}},bt=Q(st,[["__scopeId","data-v-b0a17766"]]);export{bt as default};
