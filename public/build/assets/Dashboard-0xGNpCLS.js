import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-DOTbLxG3.js";import{d as V}from"./index-CZQkL-u1.js";import{u as P,r as T,x as S,o as G,a as H,s as k,c as n,b as D,d as x,h as R,e as q,f as e,t as o,j as w,y as _,g,i as l,F as U,k as F,z as J}from"./app-DadADKby.js";import{u as K}from"./useNotifications-Tp9se4lf.js";import"./index-tO9BhvBS.js";import"./useForwardExpose-k0igM9Y9.js";import"./VisuallyHidden-DKJBfi2K.js";import"./RovingFocusGroup-Df8h-7ma.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./createLucideIcon-Cq4THym-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bb0yk9be.js";const Q={class:"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-200"},W={class:"p-6"},X={class:"mb-8"},Y={class:"flex items-center justify-between"},Z={class:"text-3xl font-bold text-gray-900 dark:text-white"},ee={class:"text-gray-600 dark:text-gray-300 mt-2"},te={class:"flex items-center gap-4"},se={class:w(["inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"])},re={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},oe={class:"relative overflow-hidden rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-6 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300"},ae={class:"flex items-center"},ne={class:"ml-4"},le={class:"text-2xl font-bold text-gray-900 dark:text-white"},ie={class:"relative overflow-hidden rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-6 hover:border-green-400 dark:hover:border-green-500 transition-all duration-300"},de={class:"flex items-center"},ue={class:"ml-4"},ce={class:"text-2xl font-bold text-gray-900 dark:text-white"},ge={key:0,class:"relative overflow-hidden rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-6 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300"},be={class:"flex items-center"},he={class:"ml-4"},xe={class:"text-2xl font-bold text-gray-900 dark:text-white"},me={key:1,class:"relative overflow-hidden rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-6 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300"},fe={class:"flex items-center"},pe={class:"ml-4"},ve={class:"text-2xl font-bold text-gray-900 dark:text-white"},ye={class:"relative rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-6"},ke={class:"mb-8"},_e={class:"flex items-center justify-between"},we={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ce={class:"text-gray-600 dark:text-gray-300 mt-1"},Me={class:"text-sm px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"},je={class:"ml-2 text-green-600 dark:text-green-400"},Se={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},De={key:0,class:"absolute top-3 right-3 z-10"},Ue={class:"relative"},ze={class:"relative inline-flex items-center justify-center h-6 w-6 rounded-full bg-red-500 text-white text-xs font-bold shadow"},Ne={class:"absolute top-3 left-3 z-10"},Ee={class:"relative"},Oe={key:0,class:"h-3 w-3 rounded-full bg-green-500 border-2 border-white dark:border-gray-800"},Ae={key:1,class:"h-3 w-3 rounded-full bg-gray-400 border-2 border-white dark:border-gray-800"},Be={class:"flex items-center gap-4"},Le={class:"relative flex h-14 w-14 items-center justify-center rounded-full font-bold text-lg bg-blue-500 text-white"},$e={class:"flex-1 min-w-0"},Ie={class:"flex items-center gap-2"},Ve={class:"font-semibold text-gray-900 dark:text-white truncate group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"},Pe={key:0,class:"text-xs text-green-600 dark:text-green-400 font-medium"},Te={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},Ge={class:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1"},He={class:"mt-6 space-y-3"},Re={class:"flex items-center justify-between text-sm"},qe={class:"font-mono text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"},Fe={key:0,class:"flex items-center justify-between text-sm"},Je={class:"text-gray-900 dark:text-white"},Ke={class:"mt-6 flex gap-3"},Qe=["onClick"],We={key:0,class:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 p-12 text-center"},Xe={class:"mt-6 text-xl font-semibold text-gray-900 dark:text-white"},Ye={class:"mt-3 text-gray-600 dark:text-gray-400 max-w-md"},ct={__name:"Dashboard",props:{users:{type:Array,required:!0}},setup(z){const d=P(),{getNotificationCount:m,markAsRead:N,setupGlobalListener:E}=K(),a=T({}),c=z,O=[{title:"Dashboard",href:V().url}],i=d.props.auth.user.role==="admin";c.users.forEach(s=>{a.value[s.id]=s.is_online_now});const u=S(()=>i?c.users.filter(s=>s.id!==d.props.auth.user.id):c.users.filter(s=>s.role==="admin"&&s.id!==d.props.auth.user.id)),A=s=>s.split(" ").map(t=>t[0]).join("").toUpperCase(),B=s=>{N(s),J.get(`/chat/${s}`)};let f=null,p=null;const v=()=>{k.post("/user/ping").catch(()=>{console.log("Ping failed")})},L=()=>{u.value.forEach(s=>{if(s.last_seen_at){const t=new Date(s.last_seen_at),b=new Date-t;a.value[s.id]=b<180*1e3}})},$=()=>{if(window.Echo)try{return window.Echo.join("online-users").here(t=>{t.forEach(r=>{r.id!==d.props.auth.user.id&&(a.value[r.id]=!0)})}).joining(t=>{t.id!==d.props.auth.user.id&&(a.value[t.id]=!0)}).leaving(t=>{t.id!==d.props.auth.user.id&&(a.value[t.id]=!1)}).listen(".UserOnlineStatusUpdated",t=>{t.user&&t.user.id!==d.props.auth.user.id&&(a.value[t.user.id]=t.is_online)}),()=>{window.Echo.leave("online-users")}}catch(s){console.error("Echo error:",s)}return()=>{}};G(()=>{v(),f=setInterval(v,3e4),p=setInterval(L,1e4);const s=$(),t=E();document.addEventListener("visibilitychange",C),H(()=>{f&&clearInterval(f),p&&clearInterval(p),s&&s(),t&&t(),k.post("/user/offline").catch(()=>{}),document.removeEventListener("visibilitychange",C)})});const C=()=>{document.hidden?k.post("/user/offline").catch(()=>{}):v()},M=S(()=>Object.values(a.value).filter(s=>s).length),j=s=>{if(!s.last_seen_at)return"Never";const t=new Date(s.last_seen_at),b=new Date-t,h=Math.floor(b/6e4);if(h<1)return"Just now";if(h<60)return`${h}m ago`;const y=Math.floor(h/60);return y<24?`${y}h ago`:`${Math.floor(y/24)}d ago`};return(s,t)=>(l(),n(U,null,[D(x(R),{title:"Dashboard"}),D(I,{breadcrumbs:O},{default:q(()=>[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",null,[e("h1",Z,o(i?"User Management":"Support Dashboard"),1),e("p",ee,o(i?"Manage and view all system users":"Chat with our support team"),1)]),e("div",te,[t[1]||(t[1]=e("div",{class:"flex items-center"},[e("div",{class:"relative mr-2"},[e("div",{class:"h-2 w-2 rounded-full bg-green-500"}),e("div",{class:"absolute h-2 w-2 rounded-full bg-green-500 animate-ping"})]),e("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Online")],-1)),e("span",se,[_(o(i?"Administrator":"User")+" ",1),t[0]||(t[0]=e("div",{class:"ml-2 h-2 w-2 rounded-full bg-blue-500 dark:bg-blue-400"},null,-1))])])]),t[2]||(t[2]=e("div",{class:"mt-4 h-1 w-24 bg-blue-500 rounded-full"},null,-1))]),e("div",re,[e("div",oe,[e("div",ae,[t[4]||(t[4]=e("div",{class:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",ne,[t[3]||(t[3]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"},"Total Users",-1)),e("p",le,o(u.value.length),1)])])]),e("div",ie,[e("div",de,[t[6]||(t[6]=e("div",{class:"p-3 rounded-lg bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ue,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"},"Online Now",-1)),e("p",ce,o(M.value),1)])])]),i?(l(),n("div",ge,[e("div",be,[t[8]||(t[8]=e("div",{class:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])],-1)),e("div",he,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"},"Admin Users",-1)),e("p",xe,o(c.users.filter(r=>r.role==="admin").length),1)])])])):g("",!0),i?(l(),n("div",me,[e("div",fe,[t[10]||(t[10]=e("div",{class:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",pe,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"},"Regular Users",-1)),e("p",ve,o(c.users.filter(r=>r.role!=="admin").length),1)])])])):g("",!0)]),e("div",ye,[e("div",ke,[e("div",_e,[e("div",null,[e("h2",we,o(i?"User Directory":"Support Team"),1),e("p",Ce,o(i?"Manage your team members and their account permissions here.":"Our support team is here to help you with any questions or issues."),1)]),e("div",Me,[_(o(i?`${u.value.length} users`:`${u.value.length} support staff`)+" ",1),e("span",je," • "+o(M.value)+" online ",1)])])]),e("div",Se,[(l(!0),n(U,null,F(u.value,r=>(l(),n("div",{key:r.id,class:"group relative overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 transition-all duration-300 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md"},[x(m)(r.id)>0?(l(),n("div",De,[e("div",Ue,[t[11]||(t[11]=e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"},null,-1)),e("span",ze,o(x(m)(r.id)>9?"9+":x(m)(r.id)),1)])])):g("",!0),e("div",Ne,[e("div",Ee,[a.value[r.id]?(l(),n("div",Oe,[...t[12]||(t[12]=[e("div",{class:"absolute h-3 w-3 rounded-full bg-green-500 animate-ping"},null,-1)])])):(l(),n("div",Ae))])]),e("div",Be,[e("div",Le,o(A(r.name)),1),e("div",$e,[e("div",Ie,[e("h3",Ve,o(r.name),1),a.value[r.id]?(l(),n("span",Pe," • Online ")):(l(),n("span",Te," • "+o(j(r)),1))]),e("p",Ge,o(r.email),1),e("span",{class:w(["inline-block mt-2 px-3 py-1 rounded-full text-xs font-semibold",(r.role==="admin","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200")])},o(r.role==="admin"?"Administrator":"User"),3)])]),e("div",He,[e("div",Re,[t[13]||(t[13]=e("span",{class:"text-gray-600 dark:text-gray-400"},"User ID:",-1)),e("span",qe,"#"+o(r.id),1)]),r.last_seen_at&&!a.value[r.id]?(l(),n("div",Fe,[t[14]||(t[14]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Last Seen:",-1)),e("span",Je,o(j(r)),1)])):g("",!0)]),e("div",Ke,[e("button",{onClick:b=>B(r.id),class:w(["flex-1 rounded-lg px-4 py-3 text-sm font-semibold transition-all duration-300 hover:shadow",a.value[r.id]?"bg-blue-500 hover:bg-blue-600 text-white":"bg-blue-400 hover:bg-blue-500 text-white opacity-90"])},o(a.value[r.id]?"Chat Now":"Send Message"),11,Qe)])]))),128))]),u.value.length===0?(l(),n("div",We,[t[15]||(t[15]=e("div",{class:"rounded-full bg-blue-50 dark:bg-blue-900/30 p-6"},[e("svg",{class:"h-12 w-12 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("h3",Xe,o(i?"No users found":"No support staff available"),1),e("p",Ye,o(i?"Get started by inviting your first team member.":"Please check back later or contact system administrator."),1)])):g("",!0)]),t[16]||(t[16]=e("div",{class:"mt-8 text-center"},[e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},[e("span",{class:"text-blue-600 dark:text-blue-400 font-medium"},"BOA Chat"),_(" • Secure communication powered by "),e("span",{class:"text-gray-700 dark:text-gray-300 font-medium"},"Realpay Global Services")])],-1))])])]),_:1})],64))}};export{ct as default};
